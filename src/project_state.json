{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 5,
  "summary": "Build an app that converts videos to audio (MP3/WAV) from either video links (embedded or direct) or uploaded video files.",
  "architectural_notes": [],
  "known_issues": [
    "Converting a TikTok short-link URL fails with an \"Unable to access the video URL\" message (CORS/auth/non-direct source limitations).",
    "Uploading a video and converting to MP3 can crash with \"Cannot read properties of null (reading 'copy_buffer')\" (null buffer/FFmpeg processing error)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-conversational-chat-style-ui-where-a-user-can-either-paste-a-video-url-including-embedded-page-urls-or-direct-file-urls-or-upload-a-video-file-and-then-select-an-output-format-mp3-or-wav-to-start-a-conversion",
      "title": "Create a conversational (chat-style) UI where a user can either paste a video URL (including embedded page URLs or direct file URLs) or upload a video file, and then select an output format (MP3 or WAV) to start a conversion.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-client-side-video-to-audio-conversion-for-uploaded-video-files-into-mp3-and-wav-and-allow-the-user-to-download-the-resulting-audio-file",
      "title": "Implement client-side video-to-audio conversion for uploaded video files into MP3 and WAV, and allow the user to download the resulting audio file.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-support-converting-a-video-provided-via-a-link-to-mp3-or-wav-by-attempting-to-fetch-the-video-content-in-the-browser-when-possible-and-provide-clear-fallbacks-instructions-when-a-link-cannot-be-accessed-e-g-due-to-cors-auth-or-non-direct-unsupported-sources",
      "title": "Support converting a video provided via a link to MP3 or WAV by attempting to fetch the video content in the browser when possible, and provide clear fallbacks/instructions when a link cannot be accessed (e.g., due to CORS, auth, or non-direct/unsupported sources).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-conversion-job-history-in-the-ui-within-the-same-chat-thread-that-records-each-conversion-request-and-its-result-success-with-download-link-or-failure-with-reason",
      "title": "Add a conversion job history in the UI (within the same chat thread) that records each conversion request and its result (success with download link, or failure with reason).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-establish-a-coherent-distinct-visual-theme-for-the-app-colors-typography-spacing-and-component-styling-and-apply-it-consistently-across-the-chat-thread-input-composer-conversion-controls-and-status-states",
      "title": "Establish a coherent, distinct visual theme for the app (colors, typography, spacing, and component styling) and apply it consistently across the chat thread, input composer, conversion controls, and status states.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-mp3-conversion-crash-that-can-occur-when-converting-an-uploaded-video-file-e-g-error-cannot-read-properties-of-null-reading-copy-buffer-by-hardening-the-mp3-encoding-pipeline-so-the-app-either-a-successfully-produces-an-mp3-download-or-b-fails-gracefully-with-a-clear-english-error-message-no-uncaught-exceptions",
      "title": "Fix the MP3 conversion crash that can occur when converting an uploaded video file (e.g., error: \"Cannot read properties of null (reading 'copy_buffer')\") by hardening the MP3 encoding pipeline so the app either (a) successfully produces an MP3 download or (b) fails gracefully with a clear English error message (no uncaught exceptions).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-link-based-conversion-so-that-when-a-user-provides-a-tiktok-short-link-url-e-g-https-www-tiktok-com-t-zp89kbbbe-the-app-performs-a-best-effort-attempt-to-resolve-the-link-and-fetch-the-underlying-video-content-including-following-redirects-and-tolerating-non-video-content-types-when-the-response-is-still-a-video-blob-and-only-fails-when-it-is-truly-not-accessible",
      "title": "Improve link-based conversion so that when a user provides a TikTok short-link URL (e.g., https://www.tiktok.com/t/ZP89Kbbbe/), the app performs a best-effort attempt to resolve the link and fetch the underlying video content (including following redirects and tolerating non-\"video/*\" content-types when the response is still a video blob), and only fails when it is truly not accessible.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-error-messages-for-url-fetch-failures-so-they-remain-in-english-are-specific-about-what-failed-invalid-url-vs-fetch-blocked-vs-non-video-response-and-avoid-promising-no-restrictions-while-still-communicating-that-the-app-will-attempt-multiple-strategies-to-access-links",
      "title": "Update user-facing error messages for URL fetch failures so they remain in English, are specific about what failed (invalid URL vs. fetch blocked vs. non-video response), and avoid promising \"no restrictions\" while still communicating that the app will attempt multiple strategies to access links.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Support converting a video provided via any link (embedded or direct) into MP3 or WAV",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Support converting an uploaded video file into MP3 or WAV",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Vid2Audio Chat",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}