/*
 * lamejs v1.2.0 - LAME MP3 encoder for JavaScript
 * https://github.com/zhuker/lamejs
 * 
 * Copyright (c) 2011-2015 antimatter15, zhuker
 * Licensed under the MIT license
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lamejs=e():t.lamejs=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(2),a=r(i);t.exports={WavHeader:a.default,Mp3Encoder:n(3).Mp3Encoder}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r,i,a){n(this,t),this.dataOffset=e,this.dataLen=r,this.channels=i,this.sampleRate=a}return r(t,[{key:"readHeader",value:function(e,n){var r=new DataView(n),i=r.getUint32(0,!1),a=r.getUint32(8,!1);if(1380533830!=i||1463899717!=a)return void console.error("Invalid WAV file");for(var o=12,s=0,u=0,f=0,l=0;o<r.byteLength;){var c=r.getUint32(o,!1),h=r.getUint32(o+4,!0);if(o+=8,1718449184==c){s=r.getUint16(o,!0),u=r.getUint16(o+2,!0),f=r.getUint32(o+4,!0),l=r.getUint16(o+14,!0)}else if(1684108385==c){e.dataLen=h,e.dataOffset=o;break}o+=h}e.channels=u,e.sampleRate=f}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Mp3Encoder=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),s=r(o),u=n(5),f=r(u),l=n(6),c=r(l);e.Mp3Encoder=function(){function t(e,n,r){i(this,t),this.channels=e,this.samplerate=n,this.kbps=r,this.mp3codec=new s.default,this.mp3codec.setModules(f.default,c.default)}return a(t,[{key:"encodeBuffer",value:function(t,e){var n=t.length,r=new Int8Array(1.25*n+7200);return 1==this.channels?this.mp3codec.encode_buffer(this.mp3codec,t,t,n,r):this.mp3codec.encode_buffer_interleaved(this.mp3codec,t,n,r),new Int8Array(r.buffer,0,this.mp3codec.flush_nogap(this.mp3codec,r,r.length))}},{key:"flush",value:function(){var t=new Int8Array(7200);return this.mp3codec.flush_nogap(this.mp3codec,t,t.length),new Int8Array(t.buffer,0,this.mp3codec.flush_nogap(this.mp3codec,t,t.length))}}]),t}()},function(t,e){t.exports=function(){function t(){this.class_id=0,this.lame_init_params=null,this.lame_encode_buffer=null,this.lame_encode_buffer_interleaved=null,this.lame_encode_flush_nogap=null,this.lame_close=null,this.lame_bitrate=null,this.lame_set_in_samplerate=null,this.lame_set_num_channels=null,this.lame_set_out_samplerate=null,this.lame_set_quality=null,this.lame_set_mode=null,this.lame_set_brate=null,this.lame_set_VBR=null,this.lame_set_VBR_q=null,this.lame_set_VBR_mean_bitrate_kbps=null,this.lame_set_VBR_min_bitrate_kbps=null,this.lame_set_VBR_max_bitrate_kbps=null,this.lame_set_lowpassfreq=null,this.lame_set_highpassfreq=null}return t.prototype.setModules=function(t,e){this.lame=new t,this.bs=new e},t.prototype.encode_buffer=function(t,e,n,r,i){return this.lame.lame_encode_buffer(t,e,n,r,i,i.length)},t.prototype.encode_buffer_interleaved=function(t,e,n,r){return this.lame.lame_encode_buffer_interleaved(t,e,n,r,r.length)},t.prototype.flush_nogap=function(t,e,n){return this.lame.lame_encode_flush_nogap(t,e,n)},t}()},function(t,e){t.exports=function(){function t(){this.LAME_MAXALBUMART=128e3,this.LAME_MAXMP3BUFFER=16384+this.LAME_MAXALBUMART,this.ga=null,this.bs=null,this.p=null,this.ver=null}return t.prototype.setModules=function(t,e,n){this.ga=t,this.bs=e,this.p=n,this.ver=this.ga.ver},t.prototype.lame_encode_flush_nogap=function(t,e,n){var r=this.bs.copy_buffer(t,e,n,1);return r<0?r:r},t.prototype.lame_encode_buffer=function(t,e,n,r,i,a){return this.lame_encode_buffer_sample_t(t,e,n,r,i,a)},t.prototype.lame_encode_buffer_interleaved=function(t,e,n,r,i){return this.lame_encode_buffer_interleaved_sample_t(t,e,n,r,i)},t.prototype.lame_encode_buffer_sample_t=function(t,e,n,r,i,a){var o=t.internal_flags;if(null==o)return-3;if(0==r)return 0;if(null==o.Class_ID)return-3;var s=o.channels_out,u=0;if(2==s){u=this.ga.lame_encode_buffer_sample(o,e,n,r,i,a)}else u=this.ga.lame_encode_buffer_sample(o,e,e,r,i,a);return u},t.prototype.lame_encode_buffer_interleaved_sample_t=function(t,e,n,r,i){var a=t.internal_flags;if(null==a)return-3;if(0==n)return 0;if(null==a.Class_ID)return-3;var o=a.channels_out,s=0;if(2==o)s=this.ga.lame_encode_buffer_interleaved(a,e,n,r,i);else{var u=new Float32Array(n);for(var f=0;f<n;f++)u[f]=e[2*f];s=this.ga.lame_encode_buffer_sample(a,u,u,n,r,i)}return s},t}()},function(t,e){t.exports=function(){function t(){this.ENCDELAY=576,this.POSTDELAY=1152,this.MDCTDELAY=48,this.FFTOFFSET=224+this.MDCTDELAY,this.DECDELAY=this.FFTOFFSET-this.MDCTDELAY/2,this.SBLIMIT=32,this.SSLIMIT=18,this.MPG_MD_LR_LR=0,this.MPG_MD_LR_I=1,this.MPG_MD_MS_LR=2,this.MPG_MD_MS_I=3,this.MPEG_AUDIO_ID=1,this.MPEG_PHASE2_LSF=0,this.MAX_BITS=4095,this.MAX_BITS_PER_CHANNEL=4095,this.MAX_BITS_PER_GRANULE=7680,this.BPC=320}return t.prototype.copy_buffer=function(t,e,n,r){var i=t.internal_flags,a=0;if(null==i)return-3;if(0==i.Class_ID)return-3;if(i.mf_samples_to_encode<1&&r<1)return 0;var o=i.mf_size-(this.ENCDELAY+this.POSTDELAY);if(i.mf_samples_to_encode<o){for(var s=i.mf_size-i.mf_samples_to_encode;s<i.mf_size;s++)i.mfbuf[0][s]=0,i.mfbuf[1][s]=0;i.mf_samples_to_encode=o}var u=0;if(i.mf_samples_to_encode>0){var f=Math.min(i.mf_samples_to_encode,n);for(var l=0;l<f;l++)e[u++]=i.mfbuf[0][i.mf_size-i.mf_samples_to_encode+l];i.mf_samples_to_encode-=f}return u},t}()}])});
